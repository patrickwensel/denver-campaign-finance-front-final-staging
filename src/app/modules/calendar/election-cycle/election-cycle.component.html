<div id="mat-sidenav-content">
<div class="container">
    <div class="tab-width">
        <form class="create-form" id="create-info" autocomplete="off" [formGroup]="electionCycle">
            <div class="flex">
                <div class="width-40">
                    <div class="flex">
                        <mat-label class="width-20">{{static_data.ethic_form.title}}</mat-label>

                        <mat-form-field appearance="fill" class="create-full-width"
                        [hideRequiredMarker]='hideRequiredMarker'>
                        <mat-label class="width-20" class="visuallyhidden">{{static_data.ethic_form.title}}
                        </mat-label>
                        <input matInput type="text" autocomplete="off" autofocus form-fields id="title"
                        formControlName="title">
                        <mat-error class="error">
                            {{errorService.checkErrorMessage(electionCycle.get('title'), 'title')}}
                        </mat-error>
                    </mat-form-field>
                       
                    </div>
                    <div class="flex">
                        <mat-label class="width-20">{{static_data.committee_registration.commitee_office.description}}</mat-label>
                        <mat-form-field appearance="fill" class="create-full-width"
                        [hideRequiredMarker]='hideRequiredMarker'>
                        <mat-label class="width-20" class="visuallyhidden">{{static_data.committee_registration.commitee_office.description}}
                        </mat-label>
                        <input matInput type="text" autocomplete="off" autofocus form-fields id="description"
                        formControlName="description" maxlength="120" >
                        <mat-error class="error">
                            {{errorService.checkErrorMessage(electionCycle.get('description'), 'description')}}
                        </mat-error>
                    </mat-form-field>
                    </div>
                    <div class="flex">
                        <mat-label class="width-20">{{static_data.calendar.election_type}}</mat-label>
                        <mat-form-field appearance="fill" class="create-full-width"
                            [hideRequiredMarker]='hideRequiredMarker'>
                            <mat-label class="width-20" class="visuallyhidden">
                                {{static_data.calendar.election_type}}</mat-label>
                                <mat-select id="election_type"
                                formControlName="election_type">
                                  <mat-option [value]="election.lookUpTypeId" *ngFor="let election of electionTypes" (click)="changevalue(election)">
                                      {{election.lookUpName}}
                                      </mat-option>
                                </mat-select>    
                            <mat-error class="error">
                                {{errorService.checkErrorMessage(electionCycle.get('election_type'), 'election_type')}}
                            </mat-error>
                        </mat-form-field>
                        
                    </div>
                    <div class="flex" *ngIf="type == 'CANSPL'">
                        <mat-label class="width-20">{{static_data.office.offs}}</mat-label>
                        <mat-form-field appearance="fill" class="create-full-width"
                        [hideRequiredMarker]='hideRequiredMarker'>
                        <mat-label class="width-20" class="visuallyhidden">offices
                        </mat-label>
                        <mat-select id="offices" aria-labelledby="offices create-info"
                        aria-label="offices" multiple id="offices"
                        formControlName="offices" (selectionChange)="onChangeoffice($event)">
                        <mat-option #allSelectedOffice (click)="toggleAllSelectionOffice()" [value]="0">All
                            Offices</mat-option>
                        <mat-option (click)="tosslePerOneOffice(allSelectedOffice.viewValue)"
                            *ngFor="let office of getOfficeTypeData" [value]="office.lookUpTypeId">
                            {{office.lookUpName}}
                        </mat-option>
                    </mat-select>
                        <!-- <mat-error class="error">
                            {{errorService.checkErrorMessage(electionCycle.get('offices'), 'offices')}}
                        </mat-error> -->
                    </mat-form-field>
                    </div>
                    <div class="flex" *ngIf="type == 'SPL'">
                        <mat-label class="width-20">{{static_data.office.offs}}</mat-label>
                        <mat-form-field appearance="fill" class="create-full-width"
                        [hideRequiredMarker]='hideRequiredMarker'>
                        <mat-label class="width-20" class="visuallyhidden">offices
                        </mat-label>
                        <mat-select id="offices" aria-labelledby="offices create-info"
                        aria-label="offices" multiple id="offices"
                        formControlName="offices" (selectionChange)="onChangeoffice($event)">
                        <mat-option #allSelectedOffice (click)="toggleAllSelectionOffice()" [value]="0">All
                            Offices</mat-option>
                        <mat-option (click)="tosslePerOneOffice(allSelectedOffice.viewValue)"
                            *ngFor="let office of getOfficeTypeData" [value]="office.lookUpTypeId">
                            {{office.lookUpName}}
                        </mat-option>
                    </mat-select>
                        <!-- <mat-error class="error">
                            {{errorService.checkErrorMessage(electionCycle.get('offices'), 'offices')}}
                        </mat-error> -->
                    </mat-form-field>
                    </div>
                    <div class="flex" *ngIf="type == 'SPL'">
                        <mat-label class="width-20">{{static_data.committee_registration.committee_info.district}}</mat-label>
                        <mat-form-field appearance="fill" class="create-full-width"
                            [hideRequiredMarker]='hideRequiredMarker'>
                            <mat-label class="width-20" class="visuallyhidden">{{static_data.committee_registration.committee_info.district}}
                            </mat-label>
                            <input matInput type="text" autocomplete="off" autofocus form-fields id="ratio"
                            formControlName="district" maxlength="80">
                            <!-- <mat-error class="error">
                                {{errorService.checkErrorMessage(electionCycle.get('district'), 'district')}}
                            </mat-error> -->
                        </mat-form-field>
                    </div>
                </div>
                <div class="width-50">
                
                    <div class="flex">
                        <mat-label class="width-20">{{static_data.system_Management.ballot_Issues_heading.election_cycle}}</mat-label>
                        <div class="grid-date">
                            <mat-form-field appearance="fill" class="width-49">
                                <mat-label>Start Date</mat-label>
                                <input matInput [matDatepicker]="picker1" formControlName="Ec_start_date">
                                <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                <mat-datepicker #picker1></mat-datepicker>
                                <mat-error class="error">
                                    {{errorService.checkErrorMessage(electionCycle.get('Ec_start_date'), 'start_date')}}
                                </mat-error>
                              </mat-form-field>
                              
                              <mat-form-field appearance="fill" class="width-49">
                                <mat-label>End Date</mat-label>
                                <input [min]="electionCycle.value.Ec_start_date" matInput [matDatepicker]="picker2" (dateInput)="changeStatus($event)"
                                formControlName="Ec_end_date">
                                <mat-datepicker-toggle matSuffix  [for]="picker2"></mat-datepicker-toggle>
                                <mat-datepicker #picker2 ></mat-datepicker>
                                <mat-error class="error">
                                    {{errorService.checkErrorMessage(electionCycle.get('Ec_end_date'), 'end_date')}}
                                </mat-error>
                              </mat-form-field>
                              </div>
                    </div>
                    <div class="flex">
                        <mat-label class="width-20">{{static_data.committee_registration.committee_info.election_date}}</mat-label>
                   
                        <mat-form-field appearance="fill" style="width: 33%;">
                            <mat-label>Start Date</mat-label>
                            <input matInput [matDatepicker]="picker3" formControlName="election_date">
                            <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                            <mat-datepicker #picker3></mat-datepicker>
                            <mat-error class="error">
                                {{errorService.checkErrorMessage(electionCycle.get('election_date'), 'start_date')}}
                            </mat-error>
                          </mat-form-field>
               
                </div>
                    <div class="flex">
                        <mat-label class="width-20">{{static_data.calendar.filling_period}}</mat-label>
                        <div class="grid-date">
                            <mat-form-field appearance="fill" class="width-49">
                                <mat-label>Start Date</mat-label>
                                <input matInput [matDatepicker]="picker4" formControlName="Ie_start_date">
                                <mat-datepicker-toggle matSuffix [for]="picker4"></mat-datepicker-toggle>
                                <mat-datepicker #picker4></mat-datepicker>
                                <mat-error class="error">
                                    {{errorService.checkErrorMessage(electionCycle.get('Ie_start_date'), 'start_date')}}
                                </mat-error>
                              </mat-form-field>
                              
                              <mat-form-field appearance="fill" class="width-49">
                                <mat-label>End Date</mat-label>
                                <input [min]="electionCycle.value.Ie_start_date" matInput [matDatepicker]="picker5"
                                formControlName="Ie_end_date">
                                <mat-datepicker-toggle matSuffix [for]="picker5"></mat-datepicker-toggle>
                                <mat-datepicker #picker5></mat-datepicker>
                                <mat-error class="error">
                                    {{errorService.checkErrorMessage(electionCycle.get('Ie_end_date'), 'end_date')}}
                                </mat-error>
                              </mat-form-field>
                              </div>
                    </div>
                    <div class="flex">
                        <mat-label class="width-20">{{static_data.calendar.status}}</mat-label>
                        <mat-form-field appearance="fill" class="create-full-width"
                        [hideRequiredMarker]='hideRequiredMarker'>
                        <mat-label class="width-20" class="visuallyhidden">
                            {{static_data.calendar.status}}</mat-label>
                            <mat-select id="status"
                            formControlName="status">
                              <mat-option [value]="status.lookUpTypeId" *ngFor="let status of electionStatus">
                                  {{status.lookUpName}}
                                  </mat-option>
                            </mat-select>    
                        <!-- <mat-error class="error">
                            {{errorService.checkErrorMessage(electionCycle.get('status'), 'status')}}
                        </mat-error> -->
                    </mat-form-field>
                    </div>
                    <div class="btn-cancel-alg">
                        <!-- <span class="btn-mar-back">
                            <button mat-button color="primary" >Cancel</button>
                        </span> -->
                        <span id="save-btn">
                            <button id="addInfo" type="button" mat-flat-button color="primary" class="nrmlfillbtn" (click)="save()"
                            >{{editGrid ? static_data.button.update : static_data.button.add}}</button>
                        </span>
                    </div>
                </div>
            </div>
        </form>
    </div>
    </div>
    <table mat-table [dataSource]="dataMatchingList" multiTemplateDataRows>
        <ng-container matColumnDef="toggle">
            <th mat-header-cell *matHeaderCellDef> <span class="visuallyhidden">toggle</span></th>
            <td mat-cell *matCellDef="let element">
                <a href="javascript:void()" (click)="element.isExpanded = !element.isExpanded">
                    <mat-icon *ngIf="element.isExpanded">expand_less</mat-icon>
                    <mat-icon *ngIf="!element.isExpanded">expand_more</mat-icon>
                </a>
            </td>
        </ng-container>
        <ng-container matColumnDef="title">
            <th mat-header-cell *matHeaderCellDef> {{static_data.ethic_form.title}} </th>
            <td mat-cell *matCellDef="let element" title="{{element.electionCycle}}"> {{element.electionCycle}} </td>
        </ng-container>
    
        <ng-container matColumnDef="election_type">
            <th mat-header-cell *matHeaderCellDef>{{static_data.calendar.election_type}} </th>
            <td mat-cell *matCellDef="let element"> {{element.electionCycleType}} </td>
        </ng-container>
    
        <ng-container matColumnDef="Ec_start_date">
            <th mat-header-cell *matHeaderCellDef> {{static_data.manage_committee.start_date}} </th>
            <td mat-cell *matCellDef="let element">{{element.startDate | date:this.masterDate.dateFormat}} </td>
        </ng-container>
    
        <ng-container matColumnDef="Ec_end_date">
            <th mat-header-cell *matHeaderCellDef> {{static_data.manage_committee.end_date}} </th>
            <td mat-cell *matCellDef="let element"> {{element.endDate | date:this.masterDate.dateFormat}}</td>
        </ng-container>
    
        <ng-container matColumnDef="Election_date">
            <th mat-header-cell *matHeaderCellDef> {{static_data.committee_registration.committee_info.election_date}} </th>
            <td mat-cell *matCellDef="let element"> {{element.electionDate | date:this.masterDate.dateFormat}} </td>
        </ng-container>
    
        <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef> {{static_data.calendar.status}} </th>
            <td mat-cell *matCellDef="let element"> {{element.statusDesc}} </td>
        </ng-container>

        <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef> {{static_data.public_funding.action}} </th>
            <td mat-cell *matCellDef="let element" class="click-hand">
                <span class="material-icons" (click)="editOfficerForm(element)">mode_edit_outline</span>&nbsp;&nbsp;
                <span class="material-icons" (click)="openConfirmationModal(element.electionCycleId)">delete_forever</span>
            </td>
        </ng-container>
     <!-- Template for details row -->
     <ng-container matColumnDef="expandedDetail">
        <td mat-cell *matCellDef="let element" [attr.colspan]="displayedStudentsColumnsList.length">

            <div *ngIf="element.isExpanded" class="row student-element-detail"
                [@detailExpand]="element.isExpanded ? 'expanded' : 'collapsed'">
                <div class="container">
                    <div class="categories">
                        <div class="categories_item left-34">
                            <div><label
                                    class="toggle-font-weght">{{static_data.committee_registration.commitee_office.description}}</label>
                            </div><br>
                            <div class="mar-height ofc-p" title="{{element.description}}">  {{element.description ? element.description : 'NA'}}</div>
                        </div>
                        <div class="categories_item left-42">
                            <div><label
                                    class="toggle-font-weght">{{static_data.office.offs}}</label>
                            </div><br>
                            <div class="mar-height ofc-p" title="{{element.offices}}"> {{element.offices ? element.offices : 'NA'}}</div>
                        </div>
                        <div class="categories_item left-20">
                            <div><label
                                    class="toggle-font-weght">{{static_data.committee_registration.committee_info.district}}</label>
                            </div><br>
                            <div class="mar-height ofc-p" title="{{element.district}}">{{element.district ? element.district : 'NA'}}</div>
                        </div>
                        <div class="categories_item left-44"> 
                            <div><label
                                    class="toggle-font-weght">{{static_data.calendar.ie_start_date}}</label>
                            </div><br>
                            <div class="mar-height"> {{element.ieStartDate | date:this.masterDate.dateFormat}}</div>
                        </div>
                        <div class="categories_item left-113">
                            <div><label
                                class="toggle-font-weght">{{static_data.calendar.ie_end_date}}</label>
                        </div><br>
                        <div class="mar-height "> {{element.ieEndDate | date:this.masterDate.dateFormat}}</div>
                        </div>
                    </div>
                </div>
            </div>

        </td>
    </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedStudentsColumnsList;sticky: true"></tr>
        <tr mat-row *matRowDef="let element; columns: displayedStudentsColumnsList;" class="student-element-row" [class.student-expanded-row]="element.isExpanded"></tr>
    
        <!-- Extra row to show detail content column -->
        <!-- <div *ngIf="isTableExpanded"> -->
        <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="student-detail-row"
            [ngClass]="{'hide':!row.isExpanded}"></tr>
        <!-- </div> -->
    </table>
   </div>